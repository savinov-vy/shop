<!DOCTYPE>
<html>

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>

<body>
<div class="container">
    <h1>Обратная связь</h1>
    <form>

        <input type="text" id="title" name="title" placeholder="Title" class="form-control"><br>
        <input type="text" id="price" name="price" placeholder="Price" class="form-control"><br>
        <button type="button" id="sendMail" class="btn btn-success"> Отправить</button>
    </form>
</div>
<div id="errorMess"></div>
<div id="test_prod">test prod</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script type="text/javascript">
    $("#test_prod").on("click", function () {
        $.get('/app/a1', function (data) {
            console.log(data);
            var table = "<table>" +
                "<tr><td>"+data.id+"</td><td>"+data.title+"</td><td>"+data.price+"</td></tr>" +
                "</table>"
            $("#test_prod").html(table);
        });
    });

    $("#sendMail").on("click", function () {

        var title = $("#title").val().trim();
        var price = $("#price").val().trim();

         if (title == "") {
            $("#errorMess").text("Введите title");
            return false;
        } else if (price == "") {
            $("#errorMess").text("Введите price");
            return false;
          }
        $("#errorMess").text("");


        $.ajax({
            /*    Обязательные параметры*/
            url: "/add",
            dataType: 'json',
            type: 'POST',
            cache: false,
            contentType: 'applicatoin/json',
            data: JSON.stringify({

                title: $("#name").val(),
                price: $("#phone").val(),
            }),

            /*    необязательные параметры*/
            beforeSend: function () {
                $("#sendMail").prop("disable", true);
            },
            success: function (data) {
                alert(data);
                $("#sendMail").prop("disabled", false);
            }

        });

    });

</script>
</body>
</html>
